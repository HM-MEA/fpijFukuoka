# ５章　外部リソースを扱う

 　「外部リソース」を使用する場合は，ガベージコレクション(GC)は開発者の責任の範囲です。

* 外部リソースとは?
  * データベース接続
  * ファイル
  * ソケット
  * ネイティブリソース

## 5.1 リソースの解放

ベンカット・スブラマニアン（筆者）の経験： 

* **アプリケーションの使用率が高くなると落ちるアプリケーション**
  * 開発者はその問題を「正常に動きます…ほとんどの場合は。」と説明した
  * finalize()でデータベースの接続を開放していたため，JVMは十分なメモリを持っているのでGCを走らせる必要がない判断していた
  * ファイナライザは滅多に呼ばれず外部リソースが溜まり，動作が不安定になっていた

### 5.1.1 問題を覗いてみる

### 5.1.2 リソースを閉じる

### 5.1.3 確実にリソースを開放する

### 5.1.4 自動リソース管理（ARM）の使用

## 5.2 ラムダ式でリソース解放

### 5.2.1 リソース開放を行うクラスの準備

### 5.2.2 高階関数の使用

### 5.2.3 インスタンス化違法に使用

## 5.3 ロックの管理

## 5.4 簡潔な例外テストの生成

### 5.4.1 try/catchで例外テスト

### 5.4.2 アノテーションを使った例外テスト

### 5.4.3 例外テストにラムダ式を使用

### 5.4.4 テストの実行

## 5.5 まとめ


